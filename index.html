<!DOCTYPE html>
<html>
<head>
    <title>Telegram Mini App</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <h1>–ú–æ—ë –ø–µ—Ä–≤–æ–µ Telegram Mini App</h1>
        
        <button class="button" onclick="showAlert()">–ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
        <button class="button" onclick="showUserInfo()">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</button>
        <button class="button" onclick="toggleMainButton()">–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É</button>
        <button class="button" onclick="sendData()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç</button>

        <div id="userInfo" class="user-info"></div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showAlert() {
            tg.showAlert('–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.');
        }

        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        function showUserInfo() {
            const user = tg.initDataUnsafe.user;
            const userInfo = document.getElementById('userInfo');
            userInfo.style.display = 'block';
            userInfo.innerHTML = `
                <p>üë§ –ò–º—è: ${user.first_name}</p>
                ${user.username ? `<p>üî§ Username: @${user.username}</p>` : ''}
                <p>üÜî ID: ${user.id}</p>
                <p>üì± –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ${tg.version}</p>
                <p>üé® –¢–µ–º–∞: ${tg.colorScheme}</p>
            `;
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π
        let isMainButtonVisible = false;
        function toggleMainButton() {
            if (!isMainButtonVisible) {
                tg.MainButton.text = "–ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞";
                tg.MainButton.show();
                tg.MainButton.onClick(function(){
                    tg.showAlert("–ù–∞–∂–∞—Ç–∞ –≥–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞!");
                });
            } else {
                tg.MainButton.hide();
            }
            isMainButtonVisible = !isMainButtonVisible;
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç
        function sendData() {
            const data = {
                action: "test",
                timestamp: Date.now()
            };
            tg.sendData(JSON.stringify(data));
            tg.showAlert("–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –±–æ—Ç!");
        }
    </script>
</body>
</html>